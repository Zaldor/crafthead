backend:
  # GitHub backend (works on Cloudflare Pages) using an OAuth proxy.
  # Repo: https://github.com/Zaldor/crafthead
  name: github
  repo: Zaldor/crafthead
  branch: main
  base_url: https://crafthead-studio.pages.dev
  auth_endpoint: api/cms-oauth/auth
  commit_messages:
    create: 'Create {{collection}} "{{slug}}"'
    update: 'Update {{collection}} "{{slug}}"'
    delete: 'Delete {{collection}} "{{slug}}"'
    uploadMedia: 'Upload "{{path}}"'
    deleteMedia: 'Delete "{{path}}"'

publish_mode: editorial_workflow
media_folder: 'src/assets/images/uploads'
public_folder: '/images/uploads'

media_library:
  name: uploadcare
  config:
    publicKey: YOUR_UPLOADCARE_PUBLIC_KEY

i18n:
  structure: single_file
  locales: [en, it]
  default_locale: en

collections:
  - name: pages
    label: Pages
    folder: src/content/pages
    create: true
    slug: '{{slugBase}}.{{locale}}'
    extension: mdx
    format: frontmatter
    fields:
      - { label: Locale, name: locale, widget: select, options: [en, it], default: en }
      - { label: Slug Base, name: slugBase, widget: string }
      - { label: Title, name: title, widget: string }
      - { label: Description, name: description, widget: text, required: false }
      - { label: Hero, name: hero, widget: object, collapsed: true, fields: [
          { label: Eyebrow, name: eyebrow, widget: string, required: false },
          { label: Heading, name: heading, widget: string },
          { label: Subheading, name: subheading, widget: text, required: false },
          { label: Primary CTA Label, name: primaryCtaLabel, widget: string, required: false },
          { label: Primary CTA URL, name: primaryCtaUrl, widget: string, required: false },
          { label: Secondary CTA Label, name: secondaryCtaLabel, widget: string, required: false },
          { label: Secondary CTA URL, name: secondaryCtaUrl, widget: string, required: false }
        ] }
      - { label: Sections, name: sections, widget: list, collapsed: true, types: [
          { label: Rich Copy, name: richCopy, widget: object, fields: [
              { label: Heading, name: heading, widget: string },
              { label: Body, name: body, widget: markdown }
            ] },
          { label: Feature Grid, name: featureGrid, widget: object, fields: [
              { label: Heading, name: heading, widget: string },
              { label: Features, name: features, widget: list, fields: [
                  { label: Title, name: title, widget: string },
                  { label: Description, name: description, widget: text }
                ] }
            ] }
        ] }
      - { label: SEO, name: seo, widget: object, collapsed: true, fields: [
          { label: Meta Title, name: metaTitle, widget: string, required: false },
          { label: Meta Description, name: metaDescription, widget: text, required: false },
          { label: OG Image, name: ogImage, widget: image, required: false }
        ] }

  - name: projects
    label: Projects
    folder: src/content/projects
    create: true
    slug: '{{slugBase}}.{{locale}}'
    extension: mdx
    format: frontmatter
    fields:
      - { label: Locale, name: locale, widget: select, options: [en, it], default: en }
      - { label: Slug Base, name: slugBase, widget: string }
      - { label: Title, name: title, widget: string }
      - { label: Summary, name: summary, widget: text }
      - { label: Client, name: client, widget: relation, collection: clients, search_fields: ['name'], value_field: 'slug', display_fields: ['name'] }
      - { label: Industry, name: industry, widget: string }
      - { label: Services, name: services, widget: list, field: { label: Service, name: service, widget: string } }
      - { label: Project Date, name: projectDate, widget: datetime }
      - { label: Location, name: location, widget: string, required: false }
      - { label: Hero Image, name: heroImage, widget: image }
      - { label: Hero Image Alt, name: heroImageAlt, widget: string }
      - { label: Deliverables, name: deliverables, widget: list, field: { label: Deliverable, name: deliverable, widget: string }, required: false }
      - { label: Tools Used, name: toolsUsed, widget: list, field: { label: Tool, name: tool, widget: string }, required: false }
      - label: Key Results
        name: keyResults
        widget: list
        allow_add: true
        fields:
          - { label: Label, name: label, widget: string }
          - { label: Value, name: value, widget: string }
          - { label: Description, name: description, widget: text, required: false }
      - label: Sections
        name: sections
        widget: list
        types:
          - label: Narrative Block
            name: narrative
            widget: object
            fields:
              - { label: Heading, name: heading, widget: string }
              - { label: Body, name: body, widget: markdown }
          - label: Gallery
            name: gallery
            widget: object
            fields:
              - { label: Images, name: images, widget: list, fields: [
                  { label: Image, name: image, widget: image },
                  { label: Alt Text, name: alt, widget: string },
                  { label: Caption, name: caption, widget: string, required: false }
                ] }
      - { label: Related Testimonials, name: relatedTestimonials, widget: relation, collection: testimonials, multiple: true, search_fields: ['quote', 'clientName'], value_field: 'slug', display_fields: ['clientName'] }
      - { label: Featured, name: featured, widget: boolean, default: false }
      - { label: Draft, name: draft, widget: boolean, default: false }
      - { label: Body, name: body, widget: markdown }
      - { label: SEO, name: seo, widget: object, collapsed: true, fields: [
          { label: Meta Title, name: metaTitle, widget: string, required: false },
          { label: Meta Description, name: metaDescription, widget: text, required: false },
          { label: OG Image, name: ogImage, widget: image, required: false }
        ] }

  - name: clients
    label: Clients
    folder: src/content/clients
    create: true
    slug: '{{slug}}'
    extension: json
    format: json
    fields:
      - { label: Name, name: name, widget: string }
      - { label: Slug, name: slug, widget: string }
      - { label: Logo, name: logo, widget: image }
      - { label: Logo Alt, name: logoAlt, widget: string }
      - { label: Category, name: category, widget: string }
      - { label: Website, name: website, widget: string, required: false }
      - { label: Featured, name: featured, widget: boolean, default: false }

  - name: testimonials
    label: Testimonials
    folder: src/content/testimonials
    create: true
    slug: '{{slug}}'
    extension: json
    format: json
    fields:
      - { label: Client Name, name: clientName, widget: string }
      - { label: Client Role, name: clientRole, widget: string }
      - { label: Company, name: company, widget: string }
      - { label: Quote, name: quote, widget: text }
      - { label: Project Reference, name: projectSlugBase, widget: string }
      - { label: Weight, name: weight, widget: number, required: false }

  - name: settings
    label: Site Settings
    files:
      - label: General
        name: general
        file: src/data/settings.json
        fields:
          - { label: Site Title, name: siteTitle, widget: string }
          - { label: Site Description, name: siteDescription, widget: text }
          - { label: Site URL, name: siteUrl, widget: string }
          - { label: Logo, name: logo, widget: image }
          - { label: Favicon, name: favicon, widget: image }
          - label: Contact
            name: contact
            widget: object
            fields:
              - { label: Email, name: email, widget: string }
              - { label: Phone, name: phone, widget: string, required: false }
              - { label: Address, name: address, widget: string, required: false }
          - label: Social Links
            name: socialLinks
            widget: object
            fields:
              - { label: LinkedIn, name: linkedin, widget: string, required: false }
              - { label: Instagram, name: instagram, widget: string, required: false }
              - { label: Behance, name: behance, widget: string, required: false }
